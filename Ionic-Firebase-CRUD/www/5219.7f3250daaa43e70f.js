"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5219],{5219:(b,h,d)=>{d.r(h),d.d(h,{HomePage:()=>N});var u=d(5861),f=d(6814),_=d(95),l=d(1509),e=d(6689),a=d(8348),v=d(5619);let x=(()=>{var r;class m{get notes(){return this._notes.asObservable()}constructor(t){this.firestore=t,this._notes=new v.X([])}addNote(t){var n=this;return(0,u.Z)(function*(){try{const o=(0,a.hJ)(n.firestore,"notes"),i=yield(0,a.ET)(o,t);console.log(i);const c=yield i?.id,p=n._notes.value;let g=[{...t,id:c}];return g=g.concat(p),n._notes.next(g),g}catch(o){throw o}})()}getNotes(){var t=this;return(0,u.Z)(function*(){try{const n=(0,a.hJ)(t.firestore,"notes"),i=yield(yield(0,a.PL)(n)).docs.map(c=>{let p=c.data();return p.id=c.id,p});return console.log("notes: ",i),t._notes.next(i),i}catch(n){throw n}})()}getNoteById(t){var n=this;return(0,u.Z)(function*(){try{const o=(0,a.JU)(n.firestore,`notes/${t}`),i=yield(0,a.QT)(o);if(i.exists()){let c=i.data();return c.id=i.id,{...c}}throw console.log("No such document!"),"No such document!"}catch(o){throw o}})()}updateNote(t,n){var o=this;return(0,u.Z)(function*(){try{const i=(0,a.JU)(o.firestore,`notes/${t}`);yield(0,a.r7)(i,n);let c=o._notes.value;const p=c.findIndex(T=>T.id==t),g={id:t,...n};return c[p]=g,o._notes.next(c),g}catch(i){throw i}})()}deleteNote(t){var n=this;return(0,u.Z)(function*(){try{const o=(0,a.JU)(n.firestore,`notes/${t}`);yield(0,a.oe)(o);let i=n._notes.value;i=i.filter(c=>c.id!=t),n._notes.next(i)}catch(o){throw o}})()}}return(r=m).\u0275fac=function(t){return new(t||r)(e.LFG(a.gg))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),m})();function Z(r,m){if(1&r){const s=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item-options",5)(2,"ion-item-option",6),e.NdJ("click",function(){const o=e.CHM(s).$implicit,i=e.oxw();return e.KtG(i.editNote(o))}),e._uU(3,"EDIT"),e.qZA(),e.TgZ(4,"ion-item-option",7),e.NdJ("click",function(){const o=e.CHM(s).$implicit,i=e.oxw();return e.KtG(i.deleteNote(o))}),e._uU(5,"DELETE"),e.qZA()(),e.TgZ(6,"ion-item")(7,"ion-label"),e._uU(8),e.TgZ(9,"p")(10,"ion-text",8),e._uU(11),e.qZA()()()()()}if(2&r){const s=m.$implicit;e.xp6(8),e.hij(" ",null==s?null:s.title," "),e.xp6(3),e.hij(" ",null==s?null:s.description," ")}}function y(r,m){if(1&r){const s=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9)(3,"ion-button",1),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.cancel())}),e._UZ(4,"ion-icon",10),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Add an Entry"),e.qZA(),e.TgZ(7,"ion-buttons",0)(8,"ion-button",1),e.NdJ("click",function(){e.CHM(s);const n=e.MAs(12),o=e.oxw();return e.KtG(o.save(n))}),e._UZ(9,"ion-icon",11),e.qZA()()()(),e.TgZ(10,"ion-content",12)(11,"form",null,13)(13,"ion-item")(14,"ion-input",14),e.NdJ("ngModelChange",function(n){e.CHM(s);const o=e.oxw();return e.KtG(o.model.title=n)}),e.qZA()(),e.TgZ(15,"ion-item",15)(16,"ion-textarea",16),e.NdJ("ngModelChange",function(n){e.CHM(s);const o=e.oxw();return e.KtG(o.model.description=n)}),e.qZA()()()()}if(2&r){const s=e.oxw();e.xp6(14),e.Q6J("ngModel",s.model.title),e.xp6(2),e.Q6J("ngModel",s.model.description)}}let N=(()=>{var r;class m{constructor(t){this.note=t,this.model={},this.notes=[],this.isOpen=!1}ngOnInit(){this.note.getNotes(),this.noteSub=this.note.notes.subscribe({next:t=>{this.notes=t},error:t=>{console.log(t)}})}onWillDismiss(t){this.model={},this.isOpen=!1}cancel(){this.modal.dismiss(null,"cancel")}save(t){var n=this;return(0,u.Z)(function*(){try{if(!t.valid)return;console.log(t.value),n.model?.id?yield n.note.updateNote(n.model.id,t.value):yield n.note.addNote(t.value),n.modal.dismiss()}catch(o){console.log(o)}})()}deleteNote(t){var n=this;return(0,u.Z)(function*(){try{yield n.note.deleteNote(t?.id)}catch(o){console.log(o)}})()}editNote(t){var n=this;return(0,u.Z)(function*(){try{n.isOpen=!0,n.model={...t}}catch(o){console.log(o)}})()}ngOnDestroy(){this.noteSub&&this.noteSub.unsubscribe()}}return(r=m).\u0275fac=function(t){return new(t||r)(e.Y36(x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-home"]],viewQuery:function(t,n){if(1&t&&e.Gf(l.ki,5),2&t){let o;e.iGM(o=e.CRH())&&(n.modal=o.first)}},standalone:!0,features:[e.jDz],decls:12,vars:2,consts:[["slot","end"],[3,"click"],["name","add"],[4,"ngFor","ngForOf"],[3,"isOpen","willDismiss"],["side","end"],["color","secondary",3,"click"],["color","danger",3,"click"],[1,"ion-text-wrap"],["slot","start"],["name","arrow-back-outline"],["slot","end","name","checkmark-outline"],[1,"ion-padding"],["f","ngForm"],["label","Title","labelPlacement","stacked","type","text","name","title","placeholder","Enter the title","required","",3,"ngModel","ngModelChange"],[1,"ion-margin-vertical"],["label","Description","labelPlacement","stacked","type","text","name","description","placeholder","Enter the description","required","",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return n.isOpen=!0}),e._UZ(4,"ion-icon",2),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6," Empire Database App "),e.qZA()()(),e.TgZ(7,"ion-content")(8,"ion-list"),e.YNc(9,Z,12,2,"ion-item-sliding",3),e.qZA(),e.TgZ(10,"ion-modal",4),e.NdJ("willDismiss",function(i){return n.onWillDismiss(i)}),e.YNc(11,y,17,2,"ng-template"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("ngForOf",n.notes),e.xp6(1),e.Q6J("isOpen",n.isOpen))},dependencies:[l.Pc,l.YG,l.Sm,l.W2,l.Gu,l.gu,l.pK,l.Ie,l.u8,l.IK,l.td,l.Q$,l.q_,l.yW,l.g2,l.wd,l.sr,l.ki,l.j9,f.ez,f.sg,_.u5,_._Y,_.JJ,_.JL,_.Q7,_.On,_.F],styles:["ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:5px}"]}),m})()}}]);